!function(e,t){"object"==typeof exports&&"function"==typeof require?module.exports=t(require("Backbone"),require("underscore")):"function"==typeof define&&define.amd?define(["Backbone","underscore"],function(n,o){return t(n||e.Backbone,o||e._)}):t(Backbone,_)}(this,function(e){return e.csvToCollection=function(t){if("undefined"===t.target.files)throw new Error("There is no file.");if("csv"!==t.target.value.split(".").pop().toLowerCase())throw new Error("The file must be in csv format");var n=new FileReader;n.onload=function(){return function(t){var n,o,r;n=new e.Collection,r=t.target.result.split("\n")[0].split(";"),o=t.target.result.split("\n"),o.splice(0,1),o.forEach(function(t){var o,i;o=0,i=new e.Model,r.forEach(function(){return i.set(r[o],t.split(";")[o]),o++}),n.add(i)});var i=new CustomEvent("Load",{detail:n});document.dispatchEvent(i)}}(t),n.readAsText(t.target.files.item(0))},e.csvToCollection});
